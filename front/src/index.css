@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer components {
  .glass {
    /* Neutral, subtle glass default */
    @apply backdrop-blur-lg saturate-150 border shadow-[0_8px_30px_rgba(0,0,0,0.08)];
    background: linear-gradient(
      to bottom right,
      rgba(255,255,255,0.10),
      rgba(255,255,255,0.06)
    );
    border-color: rgba(255,255,255,0.14);
  }

  /* More transparent glass overlays on themed pages */
  .home-bg .glass,
  .dashboard-bg .glass {
    /* Keep frosted look but tint toward teal to match dashboard image */
    background: linear-gradient(
      to bottom right,
      rgba(255,255,255,0.11),
      rgba(224,255,250,0.06)
    );
    border-color: rgba(255,255,255,0.14);
    @apply backdrop-blur-xl ring-1 ring-white/20 dark:ring-white/10 rounded-2xl;
    box-shadow: 0 10px 40px rgba(13,148,136,0.18), inset 0 1px 0 rgba(255,255,255,0.22);
  }
  .dark .home-bg .glass,
  .dark .dashboard-bg .glass {
    background: linear-gradient(
      to bottom right,
      rgba(0,0,0,0.30),
      rgba(0,0,0,0.20)
    );
    border-color: rgba(255,255,255,0.10);
  }

  /* Dashboard background tuned to teal glassmorphism image */
  .dashboard-bg {
    /* Local color tokens to harmonize components on this page */
    --primary: 168 66% 38%;         /* teal */
    --ring: 168 66% 38%;
    --accent: 192 65% 46%;          /* aqua */
    --muted: 168 26% 94%;
    --muted-foreground: 168 12% 38%;

    background-image:
      /* subtle vignette */
      linear-gradient(to bottom right, rgba(255,255,255,0.02), rgba(255,255,255,0.08)),
      /* teal/cyan glow blobs */
      radial-gradient(60% 45% at 20% 15%, rgba(20,184,166,0.16), transparent 60%),
      radial-gradient(50% 40% at 85% 25%, rgba(14,165,233,0.14), transparent 65%),
      url('/images/dashboard-bg.jpg');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
  }
  .dark .dashboard-bg {
    background-image:
      linear-gradient(to bottom right, rgba(3,7,18,0.15), rgba(3,7,18,0.30)),
      radial-gradient(60% 45% at 20% 15%, rgba(20,184,166,0.22), transparent 60%),
      radial-gradient(50% 40% at 85% 25%, rgba(14,165,233,0.20), transparent 65%),
      url('/images/dashboard-bg.jpg');
    filter: saturate(120%);
  }

  /* Home background matching dashboard aesthetic */
  .home-bg {
    /* Background image */
    background-image:
      radial-gradient(65% 45% at 20% 15%, rgba(16,185,129,0.14), transparent 60%),
      radial-gradient(55% 40% at 80% 20%, rgba(234,179,8,0.12), transparent 65%),
      url('/images/home-bg.jpg');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;

    /* Adjust typography tokens for darker green texture background */
    --foreground: 150 20% 95%;         /* near-white text */
    --muted-foreground: 150 10% 80%;   /* soft secondary */
    --card-foreground: 150 20% 95%;
    --accent-foreground: 150 20% 95%;
    --primary-foreground: 0 0% 100%;   /* keep on green gradients */

    /* Force text color recomputation inside this scope */
    color: hsl(var(--foreground));
  }
  .dark .home-bg {
    background-image:
      radial-gradient(65% 45% at 20% 15%, rgba(16,185,129,0.20), transparent 60%),
      radial-gradient(55% 40% at 80% 20%, rgba(234,179,8,0.14), transparent 65%),
      url('/images/home-bg.jpg');
    filter: saturate(115%);
  }

  /* Generic background for auth pages; mirrors dashboard look */
  .background-bg {
    background-image:
      linear-gradient(to bottom right, rgba(255,255,255,0.02), rgba(255,255,255,0.08)),
      radial-gradient(60% 45% at 20% 15%, rgba(20,184,166,0.16), transparent 60%),
      radial-gradient(50% 40% at 85% 25%, rgba(14,165,233,0.14), transparent 65%),
      url('/images/dashboard-bg.jpg');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
  }
  .dark .background-bg {
    background-image:
      linear-gradient(to bottom right, rgba(3,7,18,0.15), rgba(3,7,18,0.30)),
      radial-gradient(60% 45% at 20% 15%, rgba(20,184,166,0.22), transparent 60%),
      radial-gradient(50% 40% at 85% 25%, rgba(14,165,233,0.20), transparent 65%),
      url('/images/dashboard-bg.jpg');
    filter: saturate(120%);
  }

  /* Loading spinner (Uiverse.io - Juanes200122 adapted) */
  .loader {
    --duration: 3s;
    --primary: hsl(var(--primary));
    --primary-light: color-mix(in oklab, hsl(var(--primary)) 70%, white);
    --primary-rgba: color-mix(in oklab, hsl(var(--primary)) 15%, transparent);
    width: 200px;
    height: 320px;
    position: relative;
    transform-style: preserve-3d;
  }
  @media (max-width: 480px) { .loader { zoom: 0.44; } }
  .loader:before, .loader:after {
    --r: 20.5deg;
    content: "";
    width: 320px;
    height: 140px;
    position: absolute;
    right: 32%;
    bottom: -11px;
    background: #e8e8e8;
    transform: translateZ(200px) rotate(var(--r));
    animation: mask var(--duration) linear infinite;
  }
  .loader:after { --r: -20.5deg; right: auto; left: 32%; }
  .loader .ground { position: absolute; left: -50px; bottom: -120px; transform-style: preserve-3d; transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1); }
  .loader .ground div { transform: rotateX(90deg) translate(-48px, -120px) translateZ(100px) scale(0); width: 200px; height: 200px; background: linear-gradient(45deg, var(--primary) 0%, var(--primary) 50%, var(--primary-light) 50%, var(--primary-light) 100%); transform-style: preserve-3d; animation: ground var(--duration) linear infinite; }
  .loader .ground div:before, .loader .ground div:after { content: ""; width: 156px; height: 300px; opacity: 0; background: linear-gradient(var(--primary), var(--primary-rgba)); position: absolute; }
  .loader .ground div:before { transform: rotateX(90deg) translate(44px,162px) translateZ(-50px); animation: ground-shine var(--duration) linear infinite; }
  .loader .ground div:after { transform: rotateX(90deg) rotateY(90deg) translate(0,177px) translateZ(150px); animation: ground-shine var(--duration) linear infinite; }
  .loader .box { position: absolute; animation: var(--duration) linear infinite; }
  .loader .box div { background-color: var(--primary); width: 48px; height: 48px; position: relative; transform-style: preserve-3d; animation: var(--duration) ease infinite; transform: rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0); }
  .loader .box div:before, .loader .box div:after { content: ""; position: absolute; background-color: inherit; width: inherit; height: inherit; transform: rotateX(var(--rx,90deg)) rotateY(var(--ry,0deg)) translate(var(--x,0), var(--y,-24px)) translateZ(var(--z,24px)); filter: brightness(var(--b,1.2)); }
  .loader .box div:after { --rx: 0deg; --ry: 90deg; --x: 24px; --y: 0; --b: 1.4; }
  .loader .box0 { left: 58px; top: 108px; }
  .loader .box1 { left: 25px; top: 120px; }
  .loader .box2 { left: 58px; top: 64px; }
  .loader .box3 { left: 91px; top: 120px; }
  .loader .box4 { left: 58px; top: 132px; }
  .loader .box5 { left: 25px; top: 76px; }
  .loader .box6 { left: 91px; top: 76px; }
  .loader .box7 { left: 58px; top: 87px; }
  .loader .box0 { animation-name: box-move0; } .loader .box0 div { animation-name: box-scale0; }
  .loader .box1 { animation-name: box-move1; } .loader .box1 div { animation-name: box-scale1; }
  .loader .box2 { animation-name: box-move2; } .loader .box2 div { animation-name: box-scale2; }
  .loader .box3 { animation-name: box-move3; } .loader .box3 div { animation-name: box-scale3; }
  .loader .box4 { animation-name: box-move4; } .loader .box4 div { animation-name: box-scale4; }
  .loader .box5 { animation-name: box-move5; } .loader .box5 div { animation-name: box-scale5; }
  .loader .box6 { animation-name: box-move6; } .loader .box6 div { animation-name: box-scale6; }
  .loader .box7 { animation-name: box-move7; } .loader .box7 div { animation-name: box-scale7; }
  @keyframes box-move0 { 12%{transform:translate(-220px,-120px);} 25%,52%{transform:translate(0,0);} 80%{transform:translate(0,-32px);} 90%,100%{transform:translate(0,188px);} }
  @keyframes box-scale0 { 6%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0);} 14%,100%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1);} }
  @keyframes box-move1 { 16%{transform:translate(-260px,120px);} 29%,52%{transform:translate(0,0);} 80%{transform:translate(0,-32px);} 90%,100%{transform:translate(0,188px);} }
  @keyframes box-scale1 { 10%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0);} 18%,100%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1);} }
  @keyframes box-move2 { 20%{transform:translate(120px,-190px);} 33%,52%{transform:translate(0,0);} 80%{transform:translate(0,-32px);} 90%,100%{transform:translate(0,188px);} }
  @keyframes box-scale2 { 14%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0);} 22%,100%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1);} }
  @keyframes box-move3 { 24%{transform:translate(280px,-40px);} 37%,52%{transform:translate(0,0);} 80%{transform:translate(0,-32px);} 90%,100%{transform:translate(0,188px);} }
  @keyframes box-scale3 { 18%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0);} 26%,100%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1);} }
  @keyframes box-move4 { 28%{transform:translate(60px,200px);} 41%,52%{transform:translate(0,0);} 80%{transform:translate(0,-32px);} 90%,100%{transform:translate(0,188px);} }
  @keyframes box-scale4 { 22%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0);} 30%,100%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1);} }
  @keyframes box-move5 { 32%{transform:translate(-220px,-120px);} 45%,52%{transform:translate(0,0);} 80%{transform:translate(0,-32px);} 90%,100%{transform:translate(0,188px);} }
  @keyframes box-scale5 { 26%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0);} 34%,100%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1);} }
  @keyframes box-move6 { 36%{transform:translate(-260px,120px);} 49%,52%{transform:translate(0,0);} 80%{transform:translate(0,-32px);} 90%,100%{transform:translate(0,188px);} }
  @keyframes box-scale6 { 30%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0);} 38%,100%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1);} }
  @keyframes box-move7 { 40%{transform:translate(-240px,200px);} 53%,52%{transform:translate(0,0);} 80%{transform:translate(0,-32px);} 90%,100%{transform:translate(0,188px);} }
  @keyframes box-scale7 { 34%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(0);} 42%,100%{transform:rotateY(-47deg) rotateX(-15deg) rotateZ(15deg) scale(1);} }
  @keyframes ground { 0%,65%{transform:rotateX(90deg) translate(-48px, -120px) translateZ(100px) scale(0);} 75%,90%{transform:rotateX(90deg) translate(-48px, -120px) translateZ(100px) scale(1);} 100%{transform:rotateX(90deg) translate(-48px, -120px) translateZ(100px) scale(0);} }
  @keyframes ground-shine { 0%,70%{opacity:0;} 75%,87%{opacity:0.2;} 100%{opacity:0;} }
  @keyframes mask { 0%,65%{opacity:0;} 66%,100%{opacity:1;} }

  /* Simple squares loader */
  .loadingspinner { --square: 26px; --offset: 30px; --duration: 2.4s; --delay: 0.2s; --timing-function: ease-in-out; --in-duration: 0.4s; --in-delay: 0.1s; --in-timing-function: ease-out; width: calc(3 * var(--offset) + var(--square)); height: calc(2 * var(--offset) + var(--square)); position: relative; }
  .loadingspinner div { display: inline-block; background: hsl(var(--primary)); border: none; border-radius: 2px; width: var(--square); height: var(--square); position: absolute; }
  .loadingspinner #square1 { left: calc(0 * var(--offset)); top: calc(0 * var(--offset)); animation: square1 var(--duration) var(--delay) var(--timing-function) infinite, squarefadein var(--in-duration) calc(1 * var(--in-delay)) var(--in-timing-function) both; }
  .loadingspinner #square2 { left: calc(0 * var(--offset)); top: calc(1 * var(--offset)); animation: square2 var(--duration) var(--delay) var(--timing-function) infinite, squarefadein var(--in-duration) calc(1 * var(--in-delay)) var(--in-timing-function) both; }
  .loadingspinner #square3 { left: calc(1 * var(--offset)); top: calc(1 * var(--offset)); animation: square3 var(--duration) var(--delay) var(--timing-function) infinite, squarefadein var(--in-duration) calc(2 * var(--in-delay)) var(--in-timing-function) both; }
  .loadingspinner #square4 { left: calc(2 * var(--offset)); top: calc(1 * var(--offset)); animation: square4 var(--duration) var(--delay) var(--timing-function) infinite, squarefadein var(--in-duration) calc(3 * var(--in-delay)) var(--in-timing-function) both; }
  .loadingspinner #square5 { left: calc(3 * var(--offset)); top: calc(1 * var(--offset)); animation: square5 var(--duration) var(--delay) var(--timing-function) infinite, squarefadein var(--in-duration) calc(4 * var(--in-delay)) var(--in-timing-function) both; }
  @keyframes square1 { 0%{left:0;top:0;} 8.333%{left:0;top:var(--offset);} 100%{left:0;top:var(--offset);} }
  @keyframes square2 { 0%{left:0;top:var(--offset);} 8.333%{left:0;top:calc(2 * var(--offset));} 16.67%{left:var(--offset);top:calc(2 * var(--offset));} 25%{left:var(--offset);top:var(--offset);} 83.33%{left:var(--offset);top:var(--offset);} 91.67%{left:var(--offset);top:0;} 100%{left:0;top:0;} }
  @keyframes square3 { 0%,100%{left:var(--offset);top:var(--offset);} 25%{left:var(--offset);top:0;} 33.33%{left:calc(2 * var(--offset));top:0;} 41.67%{left:calc(2 * var(--offset));top:var(--offset);} 75%{left:calc(2 * var(--offset));top:calc(2 * var(--offset));} 83.33%{left:var(--offset);top:calc(2 * var(--offset));} 91.67%{left:var(--offset);top:var(--offset);} }
  @keyframes square4 { 0%{left:calc(2 * var(--offset));top:var(--offset);} 41.67%{left:calc(2 * var(--offset));top:calc(2 * var(--offset));} 50%{left:calc(3 * var(--offset));top:calc(2 * var(--offset));} 58.33%{left:calc(3 * var(--offset));top:var(--offset);} 100%{left:calc(3 * var(--offset));top:var(--offset);} }
  @keyframes square5 { 0%{left:calc(3 * var(--offset));top:var(--offset);} 58.33%{left:calc(3 * var(--offset));top:0;} 66.67%{left:calc(2 * var(--offset));top:0;} 75%{left:calc(2 * var(--offset));top:var(--offset);} 100%{left:calc(2 * var(--offset));top:var(--offset);} }
  @keyframes squarefadein { 0%{transform:scale(0.75);opacity:0;} 100%{transform:scale(1);opacity:1;} }
}

@layer base {
  :root {
    --background: 45 20% 96%;
    --foreground: 140 30% 15%;

    --card: 0 0% 100%;
    --card-foreground: 140 30% 15%;

    --popover: 0 0% 100%;
    --popover-foreground: 140 30% 15%;

    --primary: 142 55% 35%;
    --primary-foreground: 0 0% 100%;

    --secondary: 32 65% 55%;
    --secondary-foreground: 0 0% 100%;

    --muted: 45 15% 88%;
    --muted-foreground: 140 15% 45%;

    --accent: 45 85% 55%;
    --accent-foreground: 140 30% 15%;

    --destructive: 0 70% 50%;
    --destructive-foreground: 0 0% 100%;

    --border: 45 20% 85%;
    --input: 45 20% 90%;
    --ring: 142 55% 35%;

    --radius: 0.75rem;

    --gradient-hero: linear-gradient(135deg, hsl(142 55% 35%), hsl(160 50% 40%));
    --gradient-card: linear-gradient(180deg, hsl(0 0% 100%), hsl(45 20% 98%));
    --shadow-soft: 0 4px 20px -2px hsl(142 55% 35% / 0.12);
    --shadow-elevated: 0 12px 40px -8px hsl(142 55% 35% / 0.2);

    --sidebar-background: 0 0% 98%;
    --sidebar-foreground: 240 5.3% 26.1%;
    --sidebar-primary: 240 5.9% 10%;
    --sidebar-primary-foreground: 0 0% 98%;
    --sidebar-accent: 240 4.8% 95.9%;
    --sidebar-accent-foreground: 240 5.9% 10%;
    --sidebar-border: 220 13% 91%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }

  .dark {
    --background: 140 25% 8%;
    --foreground: 45 20% 95%;

    --card: 140 20% 12%;
    --card-foreground: 45 20% 95%;

    --popover: 140 20% 12%;
    --popover-foreground: 45 20% 95%;

    --primary: 142 50% 45%;
    --primary-foreground: 0 0% 100%;

    --secondary: 32 60% 50%;
    --secondary-foreground: 0 0% 100%;

    --muted: 140 15% 20%;
    --muted-foreground: 45 15% 65%;

    --accent: 45 80% 60%;
    --accent-foreground: 140 25% 8%;

    --destructive: 0 65% 45%;
    --destructive-foreground: 0 0% 100%;

    --border: 140 15% 20%;
    --input: 140 15% 18%;
    --ring: 142 50% 45%;

    --gradient-hero: linear-gradient(135deg, hsl(142 50% 25%), hsl(160 45% 30%));
    --gradient-card: linear-gradient(180deg, hsl(140 20% 12%), hsl(140 18% 14%));
    --shadow-soft: 0 4px 20px -2px hsl(0 0% 0% / 0.3);
    --shadow-elevated: 0 12px 40px -8px hsl(0 0% 0% / 0.4);

    --sidebar-background: 240 5.9% 10%;
    --sidebar-foreground: 240 4.8% 95.9%;
    --sidebar-primary: 224.3 76.3% 48%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 240 3.7% 15.9%;
    --sidebar-accent-foreground: 240 4.8% 95.9%;
    --sidebar-border: 240 3.7% 15.9%;
    --sidebar-ring: 217.2 91.2% 59.8%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground antialiased font-sans;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-display tracking-tight;
  }
}
